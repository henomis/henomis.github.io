<!DOCTYPE html>
<html lang="it">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=38913&amp;path=livereload" data-no-instant defer></script>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Leveraging Go and Redis for Efficient Retrieval Augmented Generation - Simone Vellei - Blog</title><meta name="Description" content="This is my cool site"><meta property="og:url" content="http://localhost:38913/leveraging-go-and-redis-for-efficient-retrieval-augmented-generation/">
  <meta property="og:site_name" content="Simone Vellei - Blog">
  <meta property="og:title" content="Leveraging Go and Redis for Efficient Retrieval Augmented Generation">
  <meta property="og:description" content="Introduction Artificial Intelligence has transformed the way we handle data, and one crucial aspect of AI is similarity search. Whether itâ€™s for image recognition, recommendation systems, or natural language processing, finding similar data points quickly and accurately is a common challenge. In this blog post, we will explore a Go code snippet that showcases how to perform efficient vector similarity search using Redis and the Lingoose Go framework, catering to tech-savvy readers interested in both Go programming and AI.">
  <meta property="og:locale" content="it">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-11-05T17:06:47+01:00">
    <meta property="article:modified_time" content="2023-11-05T17:06:47+01:00">
    <meta property="article:tag" content="Lingoose">
    <meta property="article:tag" content="Ai">
    <meta property="article:tag" content="Openai">
    <meta property="article:tag" content="Rag">
    <meta property="article:tag" content="Llm">
    <meta property="og:image" content="http://localhost:38913/logo.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:38913/logo.png">
  <meta name="twitter:title" content="Leveraging Go and Redis for Efficient Retrieval Augmented Generation">
  <meta name="twitter:description" content="Introduction Artificial Intelligence has transformed the way we handle data, and one crucial aspect of AI is similarity search. Whether itâ€™s for image recognition, recommendation systems, or natural language processing, finding similar data points quickly and accurately is a common challenge. In this blog post, we will explore a Go code snippet that showcases how to perform efficient vector similarity search using Redis and the Lingoose Go framework, catering to tech-savvy readers interested in both Go programming and AI.">
<meta name="application-name" content="Simone Vellei">
<meta name="apple-mobile-web-app-title" content="Simone Vellei"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://localhost:38913/leveraging-go-and-redis-for-efficient-retrieval-augmented-generation/" /><link rel="prev" href="http://localhost:38913/la-dichiarazione-di-bletchley/" /><link rel="next" href="http://localhost:38913/rivelazione-di-grok-la-guida-del-viaggiatore-intergalattico-dellintelligenza-artificiale/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Leveraging Go and Redis for Efficient Retrieval Augmented Generation",
        "inLanguage": "it",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/localhost:38913\/leveraging-go-and-redis-for-efficient-retrieval-augmented-generation\/"
        },"genre": "posts","keywords": "lingoose, ai, openai, rag, llm","wordcount":  1151 ,
        "url": "http:\/\/localhost:38913\/leveraging-go-and-redis-for-efficient-retrieval-augmented-generation\/","datePublished": "2023-11-05T17:06:47+01:00","dateModified": "2023-11-05T17:06:47+01:00","license": "Â© 2025 Simone Vellei. All rights reserved.","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "Simone Vellei"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Simone Vellei - Blog"><span class="header-title-pre">ðŸ‘‹</span>Simone Vellei</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Simone Vellei - Blog"><span class="header-title-pre">ðŸ‘‹</span>Simone Vellei</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Leveraging Go and Redis for Efficient Retrieval Augmented Generation</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Simone Vellei</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2023-11-05">2023-11-05</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;1151 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;6 minutes&nbsp;</div>
        </div><div class="featured-image"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/lingoose001.png"
        data-srcset="/images/lingoose001.png, /images/lingoose001.png 1.5x, /images/lingoose001.png 2x"
        data-sizes="auto"
        alt="/images/lingoose001.png"
        title="/images/lingoose001.png" /></div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#vector-similarity-search">Vector Similarity Search</a></li>
    <li><a href="#advantages-of-redis-for-vector-search">Advantages of Redis for Vector Search</a></li>
    <li><a href="#implementing-vector-similarity-search-in-go">Implementing Vector Similarity Search in Go</a></li>
    <li><a href="#retrieval-augmented-generation-with-golang-and-redis">Retrieval Augmented Generation with Golang and Redis</a>
      <ul>
        <li><a href="#loading-pdf-documents">Loading PDF Documents</a></li>
        <li><a href="#creating-a-redis-vector-index">Creating a Redis Vector Index</a></li>
        <li><a href="#loading-documents-into-the-index">Loading Documents into the Index</a></li>
        <li><a href="#querying-the-index-with-qa">Querying the Index with Q&amp;A</a></li>
      </ul>
    </li>
    <li><a href="#the-ai-powered-search-engine-in-action">The AI-Powered Search Engine in Action</a></li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h2 id="introduction">Introduction</h2>
<p>Artificial Intelligence has transformed the way we handle data, and one crucial aspect of AI is similarity search. Whether it&rsquo;s for image recognition, recommendation systems, or natural language processing, finding similar data points quickly and accurately is a common challenge. In this blog post, we will explore a Go code snippet that showcases how to perform efficient vector similarity search using Redis and the <a href="https://github.com/henomis/lingoose" target="_blank" rel="noopener noreffer ">Lingoose</a> Go framework, catering to tech-savvy readers interested in both Go programming and AI.</p>
<h2 id="vector-similarity-search">Vector Similarity Search</h2>
<p>Vector similarity search is a fundamental AI concept that involves finding items similar to a query vector in a large dataset. It is widely used in recommendation systems (e.g., suggesting products or content similar to what a user likes), image and document retrieval, and more. The code snippet we&rsquo;ll examine demonstrates how to set up a Redis-based vector index and efficiently search for similar vectors.</p>
<h2 id="advantages-of-redis-for-vector-search">Advantages of Redis for Vector Search</h2>
<p>Redis, an in-memory key-value store, is a powerful choice for vector similarity search due to its low-latency performance and ability to handle real-time queries. It allows us to store vectors efficiently and perform searches in milliseconds. Redis also offers data persistence and clustering capabilities, making it suitable for large-scale applications.</p>
<h2 id="implementing-vector-similarity-search-in-go">Implementing Vector Similarity Search in Go</h2>
<p>In our code snippet, we use the <a href="https://github.com/henomis/lingoose" target="_blank" rel="noopener noreffer ">Lingoose</a> Go framework to create a Redis vector index and perform vector similarity search.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;context&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="s">&#34;github.com/RediSearch/redisearch-go/v2/redisearch&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;github.com/henomis/lingoose/index&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;github.com/henomis/lingoose/index/option&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;github.com/henomis/lingoose/index/vectordb/redis&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Create a new redis vector index</span>
</span></span><span class="line"><span class="cl">	<span class="nx">redisIndex</span> <span class="o">:=</span> <span class="nx">redis</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">		<span class="nx">redis</span><span class="p">.</span><span class="nx">Options</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">RedisearchClient</span><span class="p">:</span> <span class="nx">redisearch</span><span class="p">.</span><span class="nf">NewClient</span><span class="p">(</span><span class="s">&#34;localhost:6379&#34;</span><span class="p">,</span> <span class="s">&#34;test&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">			<span class="nx">CreateIndex</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">redis</span><span class="p">.</span><span class="nx">CreateIndexOptions</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="nx">Dimension</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="nx">Distance</span><span class="p">:</span>  <span class="nx">redis</span><span class="p">.</span><span class="nx">DistanceCosine</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="p">},</span>
</span></span><span class="line"><span class="cl">		<span class="p">},</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Insert a vector</span>
</span></span><span class="line"><span class="cl">	<span class="nx">err</span> <span class="o">:=</span> <span class="nx">redisIndex</span><span class="p">.</span><span class="nf">Insert</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">		<span class="nx">context</span><span class="p">.</span><span class="nf">Background</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">		<span class="p">[]</span><span class="nx">index</span><span class="p">.</span><span class="nx">Data</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="nx">ID</span><span class="p">:</span>     <span class="s">&#34;1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="nx">Values</span><span class="p">:</span> <span class="p">[]</span><span class="kt">float64</span><span class="p">{</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">			<span class="p">},</span>
</span></span><span class="line"><span class="cl">			<span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="nx">ID</span><span class="p">:</span>     <span class="s">&#34;2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="nx">Values</span><span class="p">:</span> <span class="p">[]</span><span class="kt">float64</span><span class="p">{</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">			<span class="p">},</span>
</span></span><span class="line"><span class="cl">		<span class="p">})</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Query the index</span>
</span></span><span class="line"><span class="cl">	<span class="nx">similarities</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">redisIndex</span><span class="p">.</span><span class="nf">Search</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">		<span class="nx">context</span><span class="p">.</span><span class="nf">Background</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">		<span class="p">[]</span><span class="kt">float64</span><span class="p">{</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">		<span class="o">&amp;</span><span class="nx">option</span><span class="p">.</span><span class="nx">Options</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">TopK</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="p">},</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Print the results</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">similarity</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">similarities</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;ID: %s, Score: %f\n&#34;</span><span class="p">,</span> <span class="nx">similarity</span><span class="p">.</span><span class="nx">ID</span><span class="p">,</span> <span class="nx">similarity</span><span class="p">.</span><span class="nx">Score</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Here&rsquo;s a breakdown of the code:</p>
<ol>
<li>
<p><strong>Importing Libraries:</strong> We import the necessary Go libraries, including Redisearch and <a href="https://github.com/henomis/lingoose" target="_blank" rel="noopener noreffer ">Lingoose</a>, to build our vector index.</p>
</li>
<li>
<p><strong>Creating the Redis Vector Index:</strong> We create a new Redis vector index using the <a href="https://github.com/henomis/lingoose" target="_blank" rel="noopener noreffer ">Lingoose</a> library, specifying options such as the Redis server location, the index name, vector dimension, and the distance metric (cosine similarity in this case).</p>
</li>
<li>
<p><strong>Inserting Vectors:</strong> We insert two vectors into the index, each with an ID and a set of float values. This simulates the process of adding data points to the index.</p>
</li>
<li>
<p><strong>Querying the Index:</strong> We perform a vector search by providing a query vector and specifying options such as the number of similar vectors to retrieve (TopK).</p>
</li>
<li>
<p><strong>Printing the Results:</strong> We print the IDs and similarity scores of the most similar vectors found in the search.</p>
</li>
</ol>
<h2 id="retrieval-augmented-generation-with-golang-and-redis">Retrieval Augmented Generation with Golang and Redis</h2>
<p>The above code snippet serves as a starting point for implementing vector similarity search in your Go-based AI projects. You can extend this functionality to create recommendation engines, content-based image retrieval systems, or personalized content filtering. In the next example, we&rsquo;ll use the <a href="https://github.com/henomis/lingoose" target="_blank" rel="noopener noreffer ">Lingoose</a> Go framework to build a <strong>retrieval augmented generation (RAG)</strong> system that uses Redis to store and search for similar vectors.</p>
<h3 id="loading-pdf-documents">Loading PDF Documents</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">docs</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">loader</span><span class="p">.</span><span class="nf">NewPDFToTextLoader</span><span class="p">(</span><span class="s">&#34;./kb&#34;</span><span class="p">).</span>
</span></span><span class="line"><span class="cl">    <span class="nf">WithTextSplitter</span><span class="p">(</span><span class="nx">textsplitter</span><span class="p">.</span><span class="nf">NewRecursiveCharacterTextSplitter</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">200</span><span class="p">)).</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Load</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nf">Background</span><span class="p">())</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The code begins by loading PDF documents from a directory and splitting their text into smaller chunks of 2000 characters. This is a crucial step because it prepares the documents for indexing and querying. The <a href="https://github.com/henomis/lingoose" target="_blank" rel="noopener noreffer ">Lingoose</a> <code>loader</code>, <code>textsplitter</code> packages are used here to facilitate this process.</p>
<h3 id="creating-a-redis-vector-index">Creating a Redis Vector Index</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Create a new Redis vector index</span>
</span></span><span class="line"><span class="cl"><span class="nx">redisIndex</span> <span class="o">:=</span> <span class="nx">index</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="nx">redis</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="nx">redis</span><span class="p">.</span><span class="nx">Options</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">RedisearchClient</span><span class="p">:</span> <span class="nx">redisearch</span><span class="p">.</span><span class="nf">NewClient</span><span class="p">(</span><span class="s">&#34;localhost:6379&#34;</span><span class="p">,</span> <span class="s">&#34;test&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="nx">CreateIndex</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">redis</span><span class="p">.</span><span class="nx">CreateIndexOptions</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">Dimension</span><span class="p">:</span> <span class="mi">1536</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nx">Distance</span><span class="p">:</span>  <span class="nx">redis</span><span class="p">.</span><span class="nx">DistanceCosine</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="nx">openaiembedder</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="nx">openaiembedder</span><span class="p">.</span><span class="nx">AdaEmbeddingV2</span><span class="p">),</span>
</span></span><span class="line"><span class="cl"><span class="p">).</span><span class="nf">WithIncludeContents</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Next, we create a Redis vector index. We&rsquo;ve specified parameters such as the dimension (1536) and the distance metric (Cosine) in order to be compliant with our AI LLM engine. The <a href="https://github.com/henomis/lingoose" target="_blank" rel="noopener noreffer ">Lingoose</a> <code>openaiembedder</code> package is employed to embed text into vectors, which is essential for AI-based searching. We also set <code>WithIncludeContents</code> to true to include the document contents in the index.</p>
<h3 id="loading-documents-into-the-index">Loading Documents into the Index</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">redisIndex</span><span class="p">.</span><span class="nf">LoadFromDocuments</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nf">Background</span><span class="p">(),</span> <span class="nx">docs</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Here, we load the documents we previously prepared into the Redis index. This step is where the AI embedding of document content happens, allowing us to perform vector-based searches later.</p>
<h3 id="querying-the-index-with-qa">Querying the Index with Q&amp;A</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">qapipeline</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="nx">openai</span><span class="p">.</span><span class="nf">NewChat</span><span class="p">().</span><span class="nf">WithVerbose</span><span class="p">(</span><span class="kc">true</span><span class="p">)).</span>
</span></span><span class="line"><span class="cl">    <span class="nf">WithIndex</span><span class="p">(</span><span class="nx">redisIndex</span><span class="p">).</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Query</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nf">Background</span><span class="p">(),</span> <span class="s">&#34;What is the NATO purpose?&#34;</span><span class="p">,</span> <span class="nx">option</span><span class="p">.</span><span class="nf">WithTopK</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The final part of the code demonstrates how to use a Q&amp;A pipeline to query the index. We create a Q&amp;A pipeline using OpenAI LLM, and with the help of the <code>WithInde</code> method, we associate it with our Redis index. We then ask a question, &ldquo;What is the NATO purpose?,&rdquo; and specify that we want the top 1 answer (<code>WithTopK(1)</code>).</p>
<h2 id="the-ai-powered-search-engine-in-action">The AI-Powered Search Engine in Action</h2>
<p>So, what does this code snippet achieve? It creates an AI-powered search engine capable of answering questions based on the content of PDF documents. When you pose a question, the search engine scans the indexed documents, computes vector-based similarity, and returns the most relevant answer. This approach is highly versatile and can be used in various real-world scenarios, such as:</p>
<ul>
<li>
<p><strong>Document Search</strong>: Build a document search engine that helps users find specific information within a large repository of documents.</p>
</li>
<li>
<p><strong>Chatbots and Virtual Assistants</strong>: Enhance chatbots and virtual assistants by enabling them to answer user questions with accuracy, drawing information from knowledge bases.</p>
</li>
<li>
<p><strong>E-Learning Platforms</strong>: Create intelligent e-learning platforms that can provide instant answers to students&rsquo; queries from course materials.</p>
</li>
<li>
<p><strong>Customer Support</strong>: Improve customer support systems by automating responses to common questions, providing faster and more accurate support.</p>
</li>
</ul>
<h2 id="conclusion">Conclusion</h2>
<p>In this blog post, we&rsquo;ve explored a Go code that demonstrates the power of combining AI, Redis, and OpenAI to create an intelligent search engine. By embedding document content into vectors and using AI models for querying, you can build a versatile and accurate search engine for a wide range of applications. We used the <a href="https://github.com/henomis/lingoose" target="_blank" rel="noopener noreffer ">Lingoose</a> Go framework that I personally developed to provide a simple and efficient way to integrate AI into your Go projects.
Experiment with the code and adapt it to your specific needs to unlock the full potential of AI-powered search. AI is constantly evolving, and its applications are limitless, making it an exciting field for tech-savvy Go programmers. Happy coding!</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2023-11-05</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/leveraging-go-and-redis-for-efficient-retrieval-augmented-generation/index.md" target="_blank">Read Markdown</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="http://localhost:38913/leveraging-go-and-redis-for-efficient-retrieval-augmented-generation/" data-hashtag="lingoose"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Linkedin" data-sharer="linkedin" data-url="http://localhost:38913/leveraging-go-and-redis-for-efficient-retrieval-augmented-generation/"><i class="fab fa-linkedin fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on WhatsApp" data-sharer="whatsapp" data-url="http://localhost:38913/leveraging-go-and-redis-for-efficient-retrieval-augmented-generation/" data-title="Leveraging Go and Redis for Efficient Retrieval Augmented Generation" data-web><i class="fab fa-whatsapp fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/lingoose/">Lingoose</a>,&nbsp;<a href="/tags/ai/">Ai</a>,&nbsp;<a href="/tags/openai/">Openai</a>,&nbsp;<a href="/tags/rag/">Rag</a>,&nbsp;<a href="/tags/llm/">Llm</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/la-dichiarazione-di-bletchley/" class="prev" rel="prev" title="La Dichiarazione Di Bletchley"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>La Dichiarazione Di Bletchley</a>
            <a href="/rivelazione-di-grok-la-guida-del-viaggiatore-intergalattico-dellintelligenza-artificiale/" class="next" rel="next" title="Grok: la guida del viaggiatore intergalattico dell&#39;intelligenza artificiale">Grok: la guida del viaggiatore intergalattico dell'intelligenza artificiale<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.145.0">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.3.0"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2019 - 2025</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Simone Vellei</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.css"><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js"></script><script type="text/javascript" src="/lib/katex/contrib/auto-render.min.js"></script><script type="text/javascript" src="/lib/katex/contrib/copy-tex.min.js"></script><script type="text/javascript" src="/lib/katex/contrib/mhchem.min.js"></script><script type="text/javascript" src="/lib/cookieconsent/cookieconsent.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"cookieconsent":{"content":{"dismiss":"Got it!","link":"Learn more","message":"This website uses Cookies to improve your experience."},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
